<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2026 Goals Bingo</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    :root {
      --bg:#fff7ec;
      --title:#ff4d8d;
      --subtitle:#ff9f45;
      --tile-text:#ffffff;
      --font-scale:1;
      --font-title:'Baloo 2', cursive;
      --font-body:'Nunito', sans-serif;
    }

    body {
      margin:0;
      font-family:var(--font-body);
      background:var(--bg);
      display:flex;
      justify-content:center;
    }

    .app{
      width:min(1200px,95vw);
      padding:20px;
      display:grid;
      grid-template-columns:1fr 340px;
      gap:20px;
      position:relative;
      transition:.3s;
    }

    .app.centered{grid-template-columns:1fr}

    header{grid-column:1/-1;text-align:center}

    h1{font-family:var(--font-title);font-size:calc(3.2rem * var(--font-scale));color:var(--title);margin:0}
    .subtitle{color:var(--subtitle)}
    .quote{margin-top:8px;font-style:italic}

    .board{display:grid;gap:12px;justify-content:center}

    .tile{aspect-ratio:1;border-radius:18px;padding:10px;display:flex;align-items:center;justify-content:center;text-align:center;font-weight:700;color:var(--tile-text);cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,.1)}

    .panel{background:#fff;border-radius:18px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.1);display:flex;flex-direction:column;gap:12px}

    textarea,select,button{border-radius:12px;padding:10px;font-family:inherit}

    #topActions{position:absolute;top:20px;right:20px;display:flex;gap:10px}
    #exportMenu{display:none;position:absolute;top:44px;right:0;background:#fff;border-radius:12px;padding:8px;box-shadow:0 10px 30px rgba(0,0,0,.15)}
    #exportMenu button{width:100%;margin-top:6px}

    @media print{.panel,#topActions{display:none}.app{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="app centered" id="capture">

<div id="topActions">
  <button onclick="toggleExportMenu()">Export</button>
  <button onclick="navigator.share ? shareBoard() : alert('Use export options instead')">Share</button>
  <div id="exportMenu">
    <button onclick="exportPNG()">PNG</button>
    <button onclick="exportJPG()">JPG</button>
    <button onclick="exportPDF()">PDF</button>
  </div>
</div>

<header>
  <h1 id="title" contenteditable>2026 Goals Bingo</h1>
  <div class="subtitle">(click to edit)</div>
  <div class="quote" id="quote" contenteditable>Small steps, big magic.</div>
</header>

<div class="board" id="board"></div>

<div class="panel" id="panel">
  <div style="display:flex;justify-content:space-between"><strong>Edit Tile</strong><button onclick="closePanel()">‚úï</button></div>
  <textarea id="editor"></textarea>

  <label>Board Size</label>
  <select onchange="setBoardSize(this.value)">
    <option value="3">3 √ó 3</option>
    <option value="4">4 √ó 4</option>
    <option value="5" selected>5 √ó 5</option>
  </select>

  <label>Theme</label>
  <div id="themeButtons"></div>
  <div id="persona"></div>
</div>
</div>

<script>
const board=document.getElementById('board');
const editor=document.getElementById('editor');
const panel=document.getElementById('panel');
let selected=null;
let boardSize=Number(localStorage.getItem('boardSize'))||5;

const themes={
 sunrise:{main:'#ff6f91',colors:['#ffd166','#ffb703','#fb8500','#ff8fab','#ff6f91'],persona:'üåÖ Sunrise Dreamer'},
 ocean:{main:'#0096c7',colors:['#90dbf4','#48cae4','#00b4d8','#0096c7','#0077b6'],persona:'üåä Calm Ocean'},
 forest:{main:'#6a994e',colors:['#a7c957','#6a994e','#386641','#90be6d','#52796f'],persona:'üå≤ Grounded Forest'},
 lavender:{main:'#cdb4db',colors:['#e0aaff','#cdb4db','#b8c0ff','#a2d2ff','#ffc8dd'],persona:'üíú Gentle Lavender'},
 berry:{main:'#ff006e',colors:['#ff006e','#d62828','#9b2226','#6a040f','#ff4d6d'],persona:'üçì Bold Berry'},
 mono:{main:'#495057',colors:['#adb5bd','#6c757d','#495057','#343a40','#212529'],persona:'‚ö´ Minimal Focus'}
};

function buildBoard(){
 board.innerHTML='';
 board.style.gridTemplateColumns=`repeat(${boardSize},1fr)`;
 const data=JSON.parse(localStorage.getItem('bingo2026'))||[];
 for(let i=0;i<boardSize*boardSize;i++){
  const t=document.createElement('div');
  t.className='tile';
  t.textContent=data[i]||'Click';
  t.onclick=()=>selectTile(i);
  board.appendChild(t);
 }
}

function selectTile(i){
 selected=i;
 editor.value=board.children[i].textContent==='Click'?'':board.children[i].textContent;
 panel.style.display='flex';
 document.querySelector('.app').classList.remove('centered');
}

editor.oninput=()=>{
 if(selected===null)return;
 board.children[selected].textContent=editor.value||'Click';
 const d=[...board.children].map(t=>t.textContent);
 localStorage.setItem('bingo2026',JSON.stringify(d));
};

function closePanel(){panel.style.display='none';document.querySelector('.app').classList.add('centered')}

function setBoardSize(n){boardSize=Number(n);localStorage.setItem('boardSize',boardSize);buildBoard()}

function toggleExportMenu(){const m=document.getElementById('exportMenu');m.style.display=m.style.display==='block'?'none':'block'}

function withCleanExport(cb){panel.style.display='none';document.querySelector('.app').classList.add('centered');setTimeout(cb,120)}
function exportPNG(){withCleanExport(()=>save('png'))}
function exportJPG(){withCleanExport(()=>save('jpeg'))}
function exportPDF(){withCleanExport(()=>{html2canvas(capture).then(c=>{const pdf=new jspdf.jsPDF();pdf.addImage(c.toDataURL(),'PNG',20,20,550,550);pdf.save('2026-goals-bingo.pdf')})})}
function save(type){html2canvas(capture).then(c=>{const a=document.createElement('a');a.href=c.toDataURL('image/'+type);a.download='2026-goals-bingo.'+type;a.click()})}
function shareBoard(){html2canvas(capture).then(c=>{c.toBlob(b=>{const f=new File([b],'goals.png',{type:'image/png'});navigator.share({files:[f],title:'My 2026 Goals Bingo'});})})}

function buildThemeButtons(){
 const wrap=document.getElementById('themeButtons');
 Object.entries(themes).forEach(([k,v])=>{const b=document.createElement('button');b.textContent=k;b.style.background=v.main;b.style.color='#fff';b.onclick=()=>{[...board.children].forEach((el,i)=>el.style.background=v.colors[i%5]);document.documentElement.style.setProperty('--title',v.main);document.getElementById('persona').textContent=v.persona};wrap.appendChild(b)})
}

function init(){buildBoard();buildThemeButtons();if(!localStorage.getItem('opened')){selectTile(0);localStorage.setItem('opened','true')}}

init();
</script>
</body>
</html>
